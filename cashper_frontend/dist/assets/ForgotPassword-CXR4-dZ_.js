import{r as a,j as e,L as o,y as d}from"./index-yrnWZ-a-.js";import{j as F,r as O}from"./api-BrxIySwa.js";import{C as L}from"./circle-check-big-rPkRElWp.js";import{A as y}from"./arrow-left-DiYeyS6s.js";import{M as j}from"./mail-Ce9qtwhw.js";import{C as u}from"./circle-alert-Dkr8_vtj.js";import{L as N}from"./lock-B34FbqGL.js";import"./createLucideIcon-CjEx-mil.js";const Y=()=>{const[p,g]=a.useState(1),[l,v]=a.useState(""),[i,b]=a.useState(""),[n,w]=a.useState(""),[h,f]=a.useState(""),[r,s]=a.useState(""),[x,m]=a.useState(!1),[P,C]=a.useState(!1),k=t=>/\S+@\S+\.\S+/.test(t),S=async t=>{if(t.preventDefault(),s(""),!l){s("Email is required");return}if(!k(l)){s("Please enter a valid email address");return}m(!0);try{await F(l),d.success("OTP sent to your email!",{position:"top-right",autoClose:3e3}),g(2)}catch(c){d.error(c.response?.data?.detail||"Failed to send OTP",{position:"top-right",autoClose:3e3})}finally{m(!1)}},E=async t=>{if(t.preventDefault(),s(""),!i||!n||!h){s("All fields are required");return}if(i.length!==6){s("OTP must be 6 digits");return}if(n.length<8){s("Password must be at least 8 characters");return}if(n!==h){s("Passwords do not match");return}m(!0);try{await O(l,i,n),d.success("Password reset successful!",{position:"top-right",autoClose:3e3}),C(!0)}catch(c){d.error(c.response?.data?.detail||"Failed to reset password",{position:"top-right",autoClose:3e3})}finally{m(!1)}},T=()=>{g(1),b(""),w(""),f(""),s("")};return P?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50 flex items-center justify-center px-3 xs:px-4 sm:px-6 py-6 sm:py-8 md:py-12",children:e.jsx("div",{className:"w-full max-w-sm xs:max-w-md sm:max-w-lg md:max-w-xl lg:max-w-md",children:e.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-xl p-6 xs:p-7 sm:p-8 border border-gray-100 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-14 w-14 xs:h-16 xs:w-16 rounded-full bg-green-100 mb-5 sm:mb-6",children:e.jsx(L,{className:"h-7 w-7 xs:h-8 xs:w-8 text-green-700"})}),e.jsx("h2",{className:"text-xl xs:text-2xl sm:text-3xl font-bold text-gray-900 mb-2 sm:mb-3",children:"Password Reset Successfully!"}),e.jsx("p",{className:"text-sm xs:text-base text-gray-600 mb-5 sm:mb-6 px-2",children:"Your password has been reset successfully. You can now login with your new password."}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 xs:p-4 mb-5 sm:mb-6 text-left",children:[e.jsx("p",{className:"text-xs xs:text-sm text-green-900 mb-2 font-semibold",children:"Next step:"}),e.jsxs("ol",{className:"list-decimal list-inside text-xs xs:text-sm text-green-800 space-y-1",children:[e.jsx("li",{children:"Click the button below to login"}),e.jsx("li",{children:"Use your email and new password"})]})]}),e.jsx("p",{className:"text-xs xs:text-sm text-gray-600 mb-5 sm:mb-6 px-2",children:"Make sure to remember your new password!"}),e.jsxs(o,{to:"/login",className:"w-full inline-flex items-center justify-center px-5 xs:px-6 py-2.5 xs:py-3 sm:py-3.5 border border-transparent text-sm xs:text-base font-semibold rounded-lg text-white bg-green-700 hover:bg-green-800 transition-all transform hover:scale-[1.02] active:scale-[0.98]",children:[e.jsx(y,{className:"h-4 w-4 xs:h-5 xs:w-5 mr-2"}),"Back to Login"]})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50 flex items-center justify-center px-3 xs:px-4 sm:px-6 py-6 sm:py-8 md:py-12",children:e.jsxs("div",{className:"w-full max-w-sm xs:max-w-md sm:max-w-lg md:max-w-xl lg:max-w-md",children:[e.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[e.jsx(o,{to:"/",className:"inline-block",children:e.jsx("h1",{className:"text-2xl xs:text-3xl sm:text-4xl font-bold text-green-700",children:" Cashper"})}),e.jsx("p",{className:"text-gray-600 mt-2 text-sm xs:text-base",children:"Reset your password"})]}),e.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-xl p-5 xs:p-6 sm:p-8 border border-gray-100",children:[e.jsx("div",{className:"mb-5 sm:mb-6",children:e.jsxs(o,{to:"/login",className:"inline-flex items-center text-xs xs:text-sm text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(y,{className:"h-3.5 w-3.5 xs:h-4 xs:w-4 mr-1"}),"Back to Login"]})}),e.jsx("h2",{className:"text-xl xs:text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:p===1?"Forgot Password?":"Reset Your Password"}),e.jsx("p",{className:"text-sm xs:text-base text-gray-600 mb-5 sm:mb-6",children:p===1?"No worries! Enter your email address and we'll send you an OTP to reset your password.":"Enter the OTP sent to your email and create a new password."}),p===1?e.jsxs("form",{onSubmit:S,className:"space-y-4 sm:space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-xs xs:text-sm font-medium text-gray-700 mb-1.5 sm:mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(j,{className:"h-4 w-4 xs:h-5 xs:w-5 text-gray-400"})}),e.jsx("input",{type:"email",id:"email",value:l,onChange:t=>{v(t.target.value),s("")},className:`block w-full pl-9 xs:pl-10 pr-3 py-2.5 xs:py-3 text-sm xs:text-base border ${r?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all outline-none`,placeholder:"you@example.com",autoFocus:!0})]}),r&&e.jsxs("div",{className:"flex items-center mt-2 text-red-500 text-xs xs:text-sm",children:[e.jsx(u,{className:"h-3.5 w-3.5 xs:h-4 xs:w-4 mr-1 flex-shrink-0"}),r]})]}),e.jsx("button",{type:"submit",disabled:x,className:"w-full bg-green-700 text-white py-2.5 xs:py-3 sm:py-3.5 rounded-lg font-semibold text-sm xs:text-base hover:bg-green-800 focus:ring-4 focus:ring-green-300 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center transform hover:scale-[1.02] active:scale-[0.98]",children:x?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 xs:h-5 xs:w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending OTP..."]}):"Send OTP"})]}):e.jsxs("form",{onSubmit:E,className:"space-y-4 sm:space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"otp",className:"block text-xs xs:text-sm font-medium text-gray-700 mb-1.5 sm:mb-2",children:"Enter OTP"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(j,{className:"h-4 w-4 xs:h-5 xs:w-5 text-gray-400"})}),e.jsx("input",{type:"text",id:"otp",value:i,onChange:t=>{b(t.target.value),s("")},className:`block w-full pl-9 xs:pl-10 pr-3 py-2.5 xs:py-3 text-sm xs:text-base border ${r?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all outline-none`,placeholder:"Enter 6-digit OTP",maxLength:"6"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-xs xs:text-sm font-medium text-gray-700 mb-1.5 sm:mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(N,{className:"h-4 w-4 xs:h-5 xs:w-5 text-gray-400"})}),e.jsx("input",{type:"password",id:"newPassword",value:n,onChange:t=>{w(t.target.value),s("")},className:`block w-full pl-9 xs:pl-10 pr-3 py-2.5 xs:py-3 text-sm xs:text-base border ${r?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all outline-none`,placeholder:"Create new password"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-xs xs:text-sm font-medium text-gray-700 mb-1.5 sm:mb-2",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(N,{className:"h-4 w-4 xs:h-5 xs:w-5 text-gray-400"})}),e.jsx("input",{type:"password",id:"confirmPassword",value:h,onChange:t=>{f(t.target.value),s("")},className:`block w-full pl-9 xs:pl-10 pr-3 py-2.5 xs:py-3 text-sm xs:text-base border ${r?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all outline-none`,placeholder:"Confirm new password"})]})]}),r&&e.jsxs("div",{className:"flex items-center text-red-500 text-xs xs:text-sm",children:[e.jsx(u,{className:"h-3.5 w-3.5 xs:h-4 xs:w-4 mr-1 flex-shrink-0"}),r]}),e.jsx("button",{type:"submit",disabled:x,className:"w-full bg-green-700 text-white py-2.5 xs:py-3 sm:py-3.5 rounded-lg font-semibold text-sm xs:text-base hover:bg-green-800 focus:ring-4 focus:ring-green-300 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center transform hover:scale-[1.02] active:scale-[0.98]",children:x?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 xs:h-5 xs:w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Resetting Password..."]}):"Reset Password"}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:T,className:"text-sm text-green-700 hover:text-green-800 font-medium",children:"Resend OTP"})})]}),e.jsx("div",{className:"mt-5 sm:mt-6 bg-gray-50 rounded-lg p-3 xs:p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(u,{className:"h-4 w-4 xs:h-5 xs:w-5 text-gray-400 mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-xs xs:text-sm text-gray-600",children:[e.jsx("p",{className:"font-medium text-gray-700 mb-1",children:"Helpful Tips:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-0.5 xs:space-y-1",children:[e.jsx("li",{children:"Check your spam folder"}),e.jsx("li",{children:"The reset link expires in 1 hour"}),e.jsx("li",{children:"Contact support if needed"})]})]})]})}),e.jsxs("p",{className:"mt-5 sm:mt-6 text-center text-xs xs:text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx(o,{to:"/create-account",className:"font-medium text-green-700 hover:text-green-800 transition-colors",children:"Sign up for free"})]})]}),e.jsxs("p",{className:"mt-4 sm:mt-6 text-center text-[10px] xs:text-xs text-gray-500 px-2",children:["Need help?"," ",e.jsx(o,{to:"/contact",className:"text-green-700 hover:underline",children:"Contact Support"})]})]})})};export{Y as default};
//# sourceMappingURL=ForgotPassword-CXR4-dZ_.js.map
